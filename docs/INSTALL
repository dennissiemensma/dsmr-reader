# Unpack ZIP ffs! ;-)
dd if=2015-09-24-raspbian-jessie.img of=/dev/mmcblk0 bs=4M
sync

# Run rPi and cnnect
ssh pi@IP

apt-get update
apt-get upgrade
apt-get install vim 
apt-get install cu minicom

echo "rpi.siemensma.net" > /etc/hostname

adduser dsmr
usermod -a -G dialout dsmr
su - dsmr
ssh-keygen -t rsa -b 4096
>> cu -l /dev/ttyUSB0 -s 115200 --parity=none


apt-get install postgresql supervisor mercurial 
apt-get install python3 python3-pip postgresql postgresql-server-dev-9.3


# Virtualenv
mkdir /home/dsmr/.virtualenvs
chown dsmr: /home/dsmr/.virtualenvs/
su - dsmr
virtualenv ~/.virtualenvs/dsmr-reader --no-site-packages
source /home/dsmr/.virtualenvs/dsmr-reader/bin/activate
# You might want to put the 'source' command in the user's bashrc.
pip3 install -r requirements.txt


# Database
### Postgres does not start due to locales? Try: dpkg-reconfigure locales
### No luck? Try editing /etc/environment, add LC_ALL="en_US.utf-8" and reboot
su - postgres
createuser -DSR dsmrreader
createdb -O dsmrreader dsmrreader
psql -c "alter user dsmrreader with password 'dsmrreader';"

# Django
./manage.py migrate